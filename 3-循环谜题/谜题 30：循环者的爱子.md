# 谜题 30：循环者的爱子

## 背景

操作符重载 ( + )。

## 代码

请提供一个对 i 的声明，将下面的循环转变为一个无限循环：  

```java
while (i != i + 0) {
}
```

不能使用浮点数。换句话说，不能把 i 声明为 double 或 float 类型的。 

## 陷阱

一个数字总是等于它自身加上 0，你被禁止使用浮点数，因此不能使用 NaN，而在整数类型中没有 NaN 的等价物。那么，你能给出什么呢？ 

## 解惑

我们必然可以得出这样的结论，即 i 的类型必须是非数值类型的，唯一的 + 操作符有定义的非数值类型就是 String。

操作符被重载了：对于 String 类型，它执行的不是加法而是字符串连接。如果在连接中的某个操作数具有非 String 的类型，那么这个操作数就会在连接之前转换成字 符串。 

## 规则或告警

i 可以被初始化为任何值，只要它是 String 类型的即可，例如：

```java
String i = "Buy seventeen copies of Effective Java"; 
while (i != i + 0) {
}
```

int 类型的数值 0 被转换成 String 类型的数值”0”，并且被追加到了感叹号之后，所产生的字符串在用 equals 方法计算时就不等于最初的字符串了，这样它们在使用==操作符进行计算时，当然就不是相等的。

对语言设计者的教训：操作符重载是很容易引起 乱的，也许 + 操作符就不应该被重载用来进行字符串连接操作。有充分的理由证明提供一个字符串连接操作符是多么必要，但是它不应该是 + 。 