# 谜题 4：初级问题  

## 背景

直接量（字面量）是指**在程序中通过源代码直接给出的值**，例如在`int a = 5;`代码中，为变量 a 所分配的初始值 5 就是一个直接量。

## 代码

```java
public class Elementary{
    public static void main(String[] args){
        System.out.println(12345+5432l);
    }
}  
```

## 陷阱

从表面上看，这像是一个很简单的谜题——简单到不需要纸和笔你就可以解决它。

加号的左操作数的各个位是从 1 到 5 升序排列的，而右操作数是降序排列的。 因此，相应各位的和仍然是常数，程序必定打印 66666。对于这样的分析，只有 一个问题：当你运行该程序时，它打印出的是 17777。难道是 Java 对打印这样 的非常数字抱有偏见吗？不知怎么的，这看起来并不像是一个合理的解释。  

## 解惑

请仔细观察 + 操作符的两个操作数，我们是将一个 int 类型的 12345 加到了 long 类型的 5432l 上。

请注意左操作数开头的数字 1 和右操作数结尾的小写字 母 l 之间的细微差异。数字 1 的水平笔划（称为“臂（arm）”）和垂直笔划（称 为“茎（stem）”）之间是一个锐角，而与此相对照的是，小写字母 l 的臂和茎 之间是一个直角。 

## 规则或告警

**教训**：在 long 型字面常量中，一定要用大写的 L，千万不要用小写的 l。 这样就可以完全掐断这个谜题所产生的混乱的源头。 

```java
System.out.println(12345+5432L); 
```

相类似的，要避免使用单独的一个 l 字母作为变量名。例如，我们很难通过观察 下面的代码段来判断它到底是打印出列表 l 还是数字 1。 

```java
//不良代码-使用了 l 作为变量名 
List l = new ArrayList(); 
l.add("Foo"); 
System.out.println(1); 
```

为避免你的 程序的读者对二者产生混淆，千万不要使用小写的 l 来作为 long 型字面常量的 结尾或是作为变量名。

## 直接量（字面量）的类型

并不是所有的数据类型都可以指定直接量，**能指定直接量的通常只有三种类型：基本类型、字符串类型和 null 类型**。具体而言，Java 支持如下 8 种类型的直接量。

#### 1）int 类型的直接量

在程序中直接给出的整型数值，可分为二进制、十进制、八进制和十六进制 4 种，其中**二进制需要以 0B 或 0b 开头**，**八进制需要以 0 开头**，**十六进制需要以 0x 或 0X 开头**。

例如 123、012（对应十进制的 10）、0x12（对应十进制的 18）等。

#### 2）long 类型的直接量

**在整型数值后添加 l 或 L 后就变成了 long 类型的直接量**。例如 3L、0x12L（对应十进制的 18L）。

#### 3）float 类型的直接量

**在一个浮点数后添加 f 或 F 就变成了 float 类型的直接量，这个浮点数可以是标准小数形式，也可以是科学计数法形式**。例如 5.34F、3.14E5f。

#### 4）double 类型的直接量

**直接给出一个标准小数形式或者科学计数法形式的浮点数就是 double 类型的直接量**。例如 5.34、3.14E5。

#### 5）boolean 类型的直接量

这个类型的直接量只有 true 和 false。

#### 6）char 类型的直接量

char 类型的直接量有三种形式，分**别是用单引号括起来的字符、转义字符和 Unicode 值表示的字符**。例如‘a’，‘\n’和‘\u0061’。

#### 7）String 类型的直接量

**一个用双引号括起来的字符序列就是 String 类型的直接量**。

在大多数其他语言中，包括 C/C++，字符串作为字符的数组被实现。然而，在 Java 中并非如此。在 Java 中，字符串实际上是对象类型。在教程后面你将看到，因为 Java 对字符串是作为对象实现的，因此，它有广泛的字符串处理能力，而且功能既强又好用。

#### 8）null 类型的直接量

这个类型的直接量只有一个值，即 null。

